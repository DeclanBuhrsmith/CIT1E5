<div class="container mt-5">
  <div class="row">
    <div class="col-md-6">
      <h1 class="mb-4">CIT1E5</h1>
      <search-form
        (setSelectedTransportationMode)="
          onTransportationModeUpdated($event.currentTransportationMode)
        "
        (setSelectedAmenities)="
          onAmenitiesUpdated($event.currentSelectedAmenities)
        "
        (onFetchPlaces)="onFetchPlaces()"
      ></search-form>
    </div>
    <div class="col-md-6">
      <open-street-map
        [latitude]="
          searchResults() && searchResults()!.length
            ? searchResults()![0].lat
            : 0
        "
        [longitude]="
          searchResults() && searchResults()!.length
            ? searchResults()![0].lon
            : 0
        "
        [radius]="radius"
        [nearByPlaces]="places"
        (onMapCenterUpdated)="onMapCenterUpdated($event)"
        (onMapInitialized)="onMapInitialized($event)"
      ></open-street-map>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div *ngIf="searchResults()" class="mt-4">
        <h2>Searched Address</h2>
        <div *ngFor="let result of searchResults()" class="card mb-3">
          <div class="card-body">
            <h5 class="card-title">{{ result.display_name }}</h5>
            <p class="card-text">
              <strong>Latitude:</strong> {{ result.lat }}<br />
              <strong>Longitude:</strong> {{ result.lon }}
            </p>
          </div>
        </div>
      </div>
      <div *ngIf="errorMessage()" class="alert alert-danger mt-3">
        {{ errorMessage() }}
      </div>
      <div *ngIf="places && places.length" class="mt-4">
        <h2>Places Nearby</h2>
        <div *ngFor="let place of places" class="card mb-3">
          <div *ngIf="place.tags" class="card-body">
            <h5 class="card-title">{{ place.tags["name"] }}</h5>
            <p class="card-text">
              <strong>Amenity:</strong> {{ place.tags["amenity"] }}<br />
              <strong>Distance from Address:</strong>
              {{ place.tags["distanceFromAddress"] }} meters<br />
              <strong>Latitude:</strong> {{ place.lat }}<br />
              <strong>Longitude:</strong> {{ place.lon }}
            </p>
          </div>
        </div>
      </div>
      <div *ngIf="overpassError()" class="alert alert-danger mt-3">
        {{ overpassError() }}
      </div>
    </div>
  </div>
</div>
